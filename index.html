<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Antrian Bank UCA</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #e8eaf6;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            background: white;
            border-radius: 8px;
            padding: 20px 25px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            color: #1a1a1a;
            font-size: 28px;
            font-weight: 600;
        }

        .settings-icon {
            width: 28px;
            height: 28px;
            cursor: pointer;
            opacity: 0.5;
            transition: opacity 0.3s;
        }

        .settings-icon:hover {
            opacity: 0.8;
        }

        /* Settings Panel */
        .settings-panel {
            background: white;
            border-radius: 8px;
            padding: 20px 25px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease, margin-bottom 0.3s ease;
        }

        .settings-panel.active {
            max-height: 300px;
            padding: 20px 25px;
            margin-bottom: 20px;
        }

        .settings-panel:not(.active) {
            padding: 0 25px;
            margin-bottom: 0;
        }

        .setting-group {
            margin-bottom: 20px;
        }

        .setting-group:last-child {
            margin-bottom: 0;
        }

        .setting-group label {
            display: block;
            font-weight: 500;
            color: #424242;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .setting-group input[type="text"] {
            width: 100px;
            padding: 8px 12px;
            border: 1px solid #d0d0d0;
            border-radius: 4px;
            font-size: 16px;
            text-transform: uppercase;
            transition: border-color 0.3s;
        }

        .setting-group input[type="text"]:focus {
            outline: none;
            border-color: #5c6bc0;
        }

        .setting-group input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #d0d0d0;
            outline: none;
            -webkit-appearance: none;
        }

        .setting-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #5c6bc0;
            cursor: pointer;
        }

        .setting-group input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #5c6bc0;
            cursor: pointer;
            border: none;
        }

        /* Statistics */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .stat-card.waiting {
            background: #e3f2fd;
        }

        .stat-card.skipped {
            background: #fff9e6;
        }

        .stat-card.served {
            background: #e8f5e9;
        }

        .stat-card.noshow {
            background: #ffebee;
        }

        .stat-card.cancelled {
            background: #f5f5f5;
        }

        .stat-icon {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .stat-number {
            font-size: 32px;
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 13px;
            color: #616161;
        }

        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
        }

        /* Display Area */
        .display-area {
            background: #5c6bc0;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            color: white;
            min-height: 400px;
        }

        .display-header {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            font-size: 18px;
            font-weight: 500;
        }

        .display-header svg {
            margin-right: 10px;
        }

        .current-queue {
            text-align: center;
        }

        .queue-number {
            font-size: 88px;
            font-weight: 700;
            margin-bottom: 15px;
            letter-spacing: 2px;
        }

        .call-count {
            font-size: 18px;
            opacity: 0.95;
            margin-bottom: 30px;
        }

        .action-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 6px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn:disabled:hover {
            transform: none;
            box-shadow: none;
        }

        .btn-success {
            background: #4caf50;
            color: white;
        }

        .btn-warning {
            background: #ffa726;
            color: white;
        }

        .btn-primary {
            background: #5c6bc0;
            color: white;
        }

        .btn-secondary {
            background: #9e9e9e;
            color: white;
        }

        .btn-danger {
            background: #ef5350;
            color: white;
        }

        .no-queue {
            text-align: center;
            padding: 60px 20px;
        }

        .no-queue-text {
            font-size: 24px;
            margin-bottom: 30px;
            font-weight: 500;
        }

        /* Control Panel */
        .control-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .control-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .control-card h3 {
            color: #1a1a1a;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .control-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .control-buttons .btn {
            width: 100%;
            justify-content: center;
        }

        /* Queue List */
        .queue-list {
            max-height: 350px;
            overflow-y: auto;
        }

        .queue-item {
            background: #fafafa;
            padding: 12px 15px;
            border-radius: 6px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.2s;
            border: 1px solid #eeeeee;
        }

        .queue-item:hover {
            background: #f5f5f5;
        }

        .queue-info {
            flex: 1;
        }

        .queue-number-small {
            font-weight: 600;
            color: #1a1a1a;
            font-size: 16px;
            margin-bottom: 3px;
        }

        .queue-time {
            font-size: 11px;
            color: #757575;
        }

        .btn-remove {
            background: none;
            border: none;
            color: #ef5350;
            cursor: pointer;
            padding: 4px;
            transition: color 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-remove:hover {
            color: #d32f2f;
        }

        .empty-queue {
            text-align: center;
            color: #9e9e9e;
            padding: 40px 0;
            font-size: 14px;
        }

        /* Scrollbar Styling */
        .queue-list::-webkit-scrollbar {
            width: 6px;
        }

        .queue-list::-webkit-scrollbar-track {
            background: #f5f5f5;
            border-radius: 10px;
        }

        .queue-list::-webkit-scrollbar-thumb {
            background: #d0d0d0;
            border-radius: 10px;
        }

        .queue-list::-webkit-scrollbar-thumb:hover {
            background: #b0b0b0;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            .stats-container {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 768px) {
            .stats-container {
                grid-template-columns: repeat(2, 1fr);
            }

            .queue-number {
                font-size: 64px;
            }

            .action-buttons {
                flex-direction: column;
            }

            .action-buttons .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div style="text-align: center; width: 100%;">
                <div style="font-size: 14px; color: #616161; margin-bottom: 8px;">Muhamad Ansori / 2222105135</div>
                <h1 style="margin: 0;">Sistem Antrian Bank UCA</h1>
            </div>
            <svg class="settings-icon" onclick="toggleSettings()" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="position: absolute; right: 25px;">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
            </svg>
        </div>

        <!-- Settings Panel (Collapsible) -->
        <div class="settings-panel" id="settingsPanel">
            <div class="setting-group">
                <label>Prefix Antrian</label>
                <input type="text" id="prefixInput" value="A" maxlength="1">
            </div>
            <div class="setting-group">
                <label>Batas Panggilan Ulang: <span id="callLimitValue">3</span>x</label>
                <input type="range" id="callLimitSlider" min="1" max="5" value="3">
            </div>
        </div>

        <!-- Statistics -->
        <div class="stats-container">
            <div class="stat-card waiting">
                <div class="stat-icon">üë•</div>
                <div class="stat-number" id="statWaiting">0</div>
                <div class="stat-label">Menunggu</div>
            </div>
            <div class="stat-card skipped">
                <div class="stat-icon">‚è±Ô∏è</div>
                <div class="stat-number" id="statSkipped">0</div>
                <div class="stat-label">Diskip</div>
            </div>
            <div class="stat-card served">
                <div class="stat-icon">‚úÖ</div>
                <div class="stat-number" id="statServed">0</div>
                <div class="stat-label">Dilayani</div>
            </div>
            <div class="stat-card noshow">
                <div class="stat-icon">‚è≠Ô∏è</div>
                <div class="stat-number" id="statNoShow">0</div>
                <div class="stat-label">Tidak Hadir</div>
            </div>
            <div class="stat-card cancelled">
                <div class="stat-icon">‚ùå</div>
                <div class="stat-number" id="statCancelled">0</div>
                <div class="stat-label">Dibatalkan</div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Display Area -->
            <div class="display-area">
                <div class="display-header">
                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path>
                    </svg>
                    Nomor Antrian Sekarang
                </div>
                
                <div id="displayContent">
                    <div class="no-queue">
                        <div class="no-queue-text">Tidak ada antrian aktif</div>
                        <button class="btn btn-secondary" onclick="callNextQueue()" id="callNextBtn" style="background: rgba(255,255,255,0.2); color: white; border: 2px solid rgba(255,255,255,0.3);">
                            Panggil Antrian Berikutnya
                        </button>
                    </div>
                </div>
            </div>

            <!-- Control Panel -->
            <div class="control-panel">
                <div class="control-card">
                    <h3>Kontrol</h3>
                    <div class="control-buttons">
                        <button class="btn btn-primary" onclick="generateQueue()">
                            <span>+</span> Tambah Antrian Baru
                        </button>
                        <button class="btn btn-secondary" onclick="callNextQueue()" id="callNextBtn2">
                            <span>üîä</span> Panggil Berikutnya
                        </button>
                        <button class="btn btn-danger" onclick="resetSystem()">
                            <span>‚Üª</span> Reset Sistem
                        </button>
                    </div>
                </div>

                <div class="control-card">
                    <h3>Antrian Menunggu</h3>
                    <div class="queue-list" id="queueList">
                        <div class="empty-queue">Belum ada antrian</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global Variables
        let queues = [];
        let currentQueue = null;
        let queueNumber = 1;
        let prefix = 'A';
        let callLimit = 3;
        let stats = {
            waiting: 0,
            skipped: 0,
            served: 0,
            noShow: 0,
            cancelled: 0
        };

        // Toggle Settings Panel
        function toggleSettings() {
            const panel = document.getElementById('settingsPanel');
            panel.classList.toggle('active');
        }

        // Initialize
        document.getElementById('prefixInput').addEventListener('input', function(e) {
            prefix = e.target.value.toUpperCase();
            e.target.value = prefix;
        });

        document.getElementById('callLimitSlider').addEventListener('input', function(e) {
            callLimit = parseInt(e.target.value);
            document.getElementById('callLimitValue').textContent = callLimit;
        });

        // Generate Queue Number
        function generateQueue() {
            const queueNum = prefix + String(queueNumber).padStart(3, '0');
            const queue = {
                id: Date.now(),
                number: queueNum,
                status: 'waiting',
                timestamp: new Date().toLocaleTimeString('id-ID'),
                callCount: 0
            };
            
            queues.push(queue);
            queueNumber++;
            stats.waiting++;
            
            updateDisplay();
            updateQueueList();
            updateStats();
        }

        // Call Next Queue
        function callNextQueue() {
            const nextQueue = queues.find(q => q.status === 'waiting' || q.status === 'skipped');
            
            if (nextQueue) {
                currentQueue = nextQueue;
                const index = queues.findIndex(q => q.id === nextQueue.id);
                queues[index].callCount++;
                
                speakQueueNumber(nextQueue.number);
                updateDisplay();
            }
        }

        // Speak Queue Number
        function speakQueueNumber(number) {
            if ('speechSynthesis' in window) {
                const text = `Nomor antrian ${number.split('').join(' ')}`;
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'id-ID';
                utterance.rate = 0.9;
                speechSynthesis.speak(utterance);
            }
        }

        // Serve Queue
        function serveQueue() {
            if (currentQueue) {
                updateQueueStatus(currentQueue.id, 'served');
                currentQueue = null;
                updateDisplay();
            }
        }

        // Skip Queue
        function skipQueue() {
            if (currentQueue) {
                if (currentQueue.callCount >= callLimit) {
                    updateQueueStatus(currentQueue.id, 'noShow');
                } else {
                    updateQueueStatus(currentQueue.id, 'skipped');
                }
                currentQueue = null;
                updateDisplay();
            }
        }

        // Update Queue Status
        function updateQueueStatus(queueId, newStatus) {
            const index = queues.findIndex(q => q.id === queueId);
            if (index !== -1) {
                const oldStatus = queues[index].status;
                queues[index].status = newStatus;
                
                stats[oldStatus]--;
                stats[newStatus]++;
                
                updateQueueList();
                updateStats();
            }
        }

        // Cancel Queue
        function cancelQueue(queueId) {
            updateQueueStatus(queueId, 'cancelled');
            if (currentQueue && currentQueue.id === queueId) {
                currentQueue = null;
                updateDisplay();
            }
        }

        // Reset System
        function resetSystem() {
            if (confirm('Apakah Anda yakin ingin mereset sistem?')) {
                queues = [];
                currentQueue = null;
                queueNumber = 1;
                stats = {
                    waiting: 0,
                    skipped: 0,
                    served: 0,
                    noShow: 0,
                    cancelled: 0
                };
                
                updateDisplay();
                updateQueueList();
                updateStats();
            }
        }

        // Update Display
        function updateDisplay() {
            const displayContent = document.getElementById('displayContent');
            const waitingQueues = queues.filter(q => q.status === 'waiting' || q.status === 'skipped');
            
            if (currentQueue) {
                displayContent.innerHTML = `
                    <div class="current-queue">
                        <div class="queue-number">${currentQueue.number}</div>
                        <div class="call-count">Dipanggil ${currentQueue.callCount}x</div>
                        <div class="action-buttons">
                            <button class="btn btn-success" onclick="serveQueue()">
                                <span>‚úì</span> Dilayani
                            </button>
                            <button class="btn btn-warning" onclick="skipQueue()">
                                <span>‚è≠</span> Diskip
                            </button>
                        </div>
                    </div>
                `;
            } else {
                const disabled = waitingQueues.length === 0 ? 'disabled' : '';
                displayContent.innerHTML = `
                    <div class="no-queue">
                        <div class="no-queue-text">Tidak ada antrian aktif</div>
                        <button class="btn" onclick="callNextQueue()" ${disabled} style="background: rgba(255,255,255,0.2); color: white; border: 2px solid rgba(255,255,255,0.3);">
                            Panggil Antrian Berikutnya
                        </button>
                    </div>
                `;
            }
            
            // Update call next buttons
            const callNextBtn2 = document.getElementById('callNextBtn2');
            if (waitingQueues.length === 0) {
                callNextBtn2.disabled = true;
            } else {
                callNextBtn2.disabled = false;
            }
        }

        // Update Queue List
        function updateQueueList() {
            const queueList = document.getElementById('queueList');
            const waitingQueues = queues.filter(q => q.status === 'waiting' || q.status === 'skipped');
            
            if (waitingQueues.length === 0) {
                queueList.innerHTML = '<div class="empty-queue">Belum ada antrian</div>';
            } else {
                queueList.innerHTML = waitingQueues.map(queue => `
                    <div class="queue-item">
                        <div class="queue-info">
                            <div class="queue-number-small">${queue.number}</div>
                            <div class="queue-time">${queue.timestamp}</div>
                        </div>
                        <button class="btn-remove" onclick="cancelQueue(${queue.id})">
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                `).join('');
            }
        }

        // Update Stats
        function updateStats() {
            document.getElementById('statWaiting').textContent = stats.waiting;
            document.getElementById('statSkipped').textContent = stats.skipped;
            document.getElementById('statServed').textContent = stats.served;
            document.getElementById('statNoShow').textContent = stats.noShow;
            document.getElementById('statCancelled').textContent = stats.cancelled;
        }

        // Initialize on load
        updateDisplay();
        updateQueueList();
        updateStats();
    </script>
</body>
</html>
